#!/bin/sh
# Display currently playing music.

case "$BLOCK_BUTTON" in
1) /home/moosicmaan/.config/.scripts/MediaCtrl.sh --prv ;;
2) /home/moosicmaan/.config/.scripts/MediaCtrl.sh --pause ;;
3) /home/moosicmaan/.config/.scripts/MediaCtrl.sh --nxt ;;
4) /home/moosicmaan/.config/.scripts/MediaCtrl.sh --stop ;;
esac

set -- --player=spotube,mpv,%any
icon="󰐊"
paused_icon="󰏤"
if status="$(playerctl "$@" status 2>&1)" && [ "$status" != "Stopped" ]; then
  [ "$status" = "Paused" ] && icon="$paused_icon"

  song="$(playerctl "$@" metadata --format="{{title}} - {{artist}}")"
else
  [ "$(mpc status "%state%")" = "paused" ] && icon="$paused_icon"

  song="$(mpc current --format="%title%[ - %artist%]")"
fi

[ -z "$song" ] && exit

. sb-theme
display "$icon $song"
